<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>NethAddress Icon Generator</title>
	<style>
		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
			background: #f5f5f5;
		}

		h1 {
			color: #AE1C28;
		}

		.icon-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
			gap: 1rem;
			margin-top: 2rem;
		}

		.icon-card {
			background: white;
			padding: 1rem;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
			text-align: center;
		}

		.icon-card canvas {
			border: 1px dashed #ccc;
			margin-bottom: 0.5rem;
		}

		.icon-card h3 {
			margin: 0.5rem 0;
			font-size: 0.9rem;
			color: #333;
		}

		.icon-card a {
			display: inline-block;
			margin-top: 0.5rem;
			padding: 0.5rem 1rem;
			background: #21468B;
			color: white;
			text-decoration: none;
			border-radius: 4px;
			font-size: 0.8rem;
		}

		.icon-card a:hover {
			background: #1a3a70;
		}

		.instructions {
			background: #e3f2fd;
			padding: 1rem;
			border-radius: 8px;
			margin-bottom: 2rem;
		}

		.instructions ol {
			margin: 0.5rem 0;
			padding-left: 1.5rem;
		}
	</style>
</head>

<body>
	<h1>NethAddress Icon Generator</h1>

	<div class="instructions">
		<strong>Instructions:</strong>
		<ol>
			<li>Wait for all icons to render below</li>
			<li>Click "Download" on each icon to save it</li>
			<li>Place the downloaded PNG files in <code>frontend/static/icons/</code></li>
			<li>Or use <code>node generate-icons.mjs</code> for better quality (uses Sharp with proper font
				rendering)</li>
		</ol>
	</div>

	<div id="icon-grid" class="icon-grid"></div>

	<script>
		// Dutch flag colours
		const FLAG_RED = '#AE1C28';
		const FLAG_WHITE = '#FFFFFF';
		const FLAG_BLUE = '#21468B';

		// Dark mode variants
		const FLAG_RED_DARK = '#C8303C';
		const FLAG_WHITE_DARK = '#F0F0F0';
		const FLAG_BLUE_DARK = '#2B5BA8';

		// Icon configurations
		const icons = [
			{ name: 'icon-192.png', size: 192, maskable: false },
			{ name: 'icon-512.png', size: 512, maskable: false },
			{ name: 'icon-maskable-192.png', size: 192, maskable: true },
			{ name: 'icon-maskable-512.png', size: 512, maskable: true },
			{ name: 'apple-touch-icon-152.png', size: 152, maskable: false },
			{ name: 'apple-touch-icon-167.png', size: 167, maskable: false },
			{ name: 'apple-touch-icon-180.png', size: 180, maskable: false },
			{ name: 'apple-touch-icon-dark-152.png', size: 152, maskable: false, variant: 'dark' },
			{ name: 'apple-touch-icon-dark-167.png', size: 167, maskable: false, variant: 'dark' },
			{ name: 'apple-touch-icon-dark-180.png', size: 180, maskable: false, variant: 'dark' },
			{ name: 'apple-touch-icon-tinted-152.png', size: 152, maskable: false, variant: 'tinted' },
			{ name: 'apple-touch-icon-tinted-167.png', size: 167, maskable: false, variant: 'tinted' },
			{ name: 'apple-touch-icon-tinted-180.png', size: 180, maskable: false, variant: 'tinted' },
			{ name: 'favicon-32.png', size: 32, maskable: false },
			{ name: 'favicon-16.png', size: 16, maskable: false },
		];

		function getColors(variant) {
			if (variant === 'dark') {
				return { red: FLAG_RED_DARK, white: FLAG_WHITE_DARK, blue: FLAG_BLUE_DARK };
			}
			if (variant === 'tinted') {
				return { red: '#333333', white: '#333333', blue: '#333333' };
			}
			return { red: FLAG_RED, white: FLAG_WHITE, blue: FLAG_BLUE };
		}

		function getOpacities(variant) {
			if (variant === 'tinted') {
				return { red: 0.9, white: 0.3, blue: 0.7 };
			}
			return { red: 1, white: 1, blue: 1 };
		}

		function drawIcon(canvas, config) {
			const ctx = canvas.getContext('2d');
			const size = config.size;
			canvas.width = size;
			canvas.height = size;

			const cornerRadius = config.maskable ? 0 : size * 0.176;
			const colours = getColors(config.variant);
			const opacities = getOpacities(config.variant);

			const stripeHeight = Math.round(size / 3);
			const lastStripeY = stripeHeight * 2;
			const lastStripeH = size - lastStripeY;

			// For maskable, A fits within safe zone; for regular, A fills the icon
			const aFontSize = config.maskable ? size * 0.82 : size * 0.9;
			const aY = config.maskable ? size * 0.76 : size * 0.80;

			// Draw flag stripes (clipped to rounded rect via composite)
			// First: draw everything onto a temporary canvas
			const tempCanvas = document.createElement('canvas');
			tempCanvas.width = size;
			tempCanvas.height = size;
			const tempCtx = tempCanvas.getContext('2d');

			// Draw flag stripes on temp canvas
			tempCtx.globalAlpha = opacities.red;
			tempCtx.fillStyle = colours.red;
			tempCtx.fillRect(0, 0, size, stripeHeight);

			tempCtx.globalAlpha = opacities.white;
			tempCtx.fillStyle = colours.white;
			tempCtx.fillRect(0, stripeHeight, size, stripeHeight);

			tempCtx.globalAlpha = opacities.blue;
			tempCtx.fillStyle = colours.blue;
			tempCtx.fillRect(0, lastStripeY, size, lastStripeH);

			tempCtx.globalAlpha = 1;

			// Cut out the A
			tempCtx.globalCompositeOperation = 'destination-out';
			tempCtx.font = `800 ${aFontSize}px Inter, -apple-system, sans-serif`;
			tempCtx.textAlign = 'center';
			tempCtx.textBaseline = 'alphabetic';
			tempCtx.fillStyle = 'black';
			tempCtx.fillText('A', size / 2, aY);

			tempCtx.globalCompositeOperation = 'source-over';

			// Draw rounded rect clip path on main canvas, then paste temp
			if (config.maskable) {
				ctx.drawImage(tempCanvas, 0, 0);
			} else {
				ctx.beginPath();
				ctx.roundRect(0, 0, size, size, cornerRadius);
				ctx.clip();
				ctx.drawImage(tempCanvas, 0, 0);

				// Subtle border
				ctx.beginPath();
				ctx.roundRect(0, 0, size, size, cornerRadius);
				ctx.strokeStyle = config.variant === 'dark' ? 'rgba(255,255,255,0.15)' : 'rgba(26,26,26,0.15)';
				ctx.lineWidth = Math.max(2, Math.round(size * 0.012));
				ctx.stroke();
			}
		}

		function createIconCard(config) {
			const card = document.createElement('div');
			card.className = 'icon-card';

			const canvas = document.createElement('canvas');
			drawIcon(canvas, config);

			const title = document.createElement('h3');
			title.textContent = `${config.name} (${config.size}Ã—${config.size})`;

			const link = document.createElement('a');
			link.href = canvas.toDataURL('image/png');
			link.download = config.name;
			link.textContent = 'Download';

			card.appendChild(canvas);
			card.appendChild(title);
			card.appendChild(link);

			return card;
		}

		// Generate all icons when Inter font is loaded
		document.fonts.ready.then(() => {
			setTimeout(() => {
				const grid = document.getElementById('icon-grid');
				icons.forEach(config => {
					grid.appendChild(createIconCard(config));
				});
			}, 500);
		});

		// Fallback if fonts API not available
		setTimeout(() => {
			const grid = document.getElementById('icon-grid');
			if (grid.children.length === 0) {
				icons.forEach(config => {
					grid.appendChild(createIconCard(config));
				});
			}
		}, 2000);
	</script>
</body>

</html>